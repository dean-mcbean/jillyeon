(function(){"use strict";self.onmessage=function(c){const{grid:s,gridWidth:r,gridHeight:l}=JSON.parse(c.data),a=(e,n)=>{let o=[0,0,0];for(let t=-1;t<=1;t++)for(let f=-1;f<=1;f++){if(t===0&&f===0)continue;const g=(e+t+r)%r,u=(n+f+l)%l;o[s[g][u]]+=1}return o},i=new Array(r).fill(null).map(()=>new Array(l).fill(0));for(let e=0;e<r;e++)for(let n=0;n<l;n++){const o=a(e,n),t=o[1]-o[2];if(t===0){i[e][n]=s[e][n];continue}else t>0?i[e][n]=1:s[e][n]===2?i[e][n]=t===-1&&o[1]?1:2:s[e][n]===1?i[e][n]=t===-1?1:2:i[e][n]=t===-3?2:0}self.postMessage(i)}})();
